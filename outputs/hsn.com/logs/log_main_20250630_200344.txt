2025-06-30 20:03:44,194 - INFO - 📋 日志系统已初始化: outputs/hsn.com/logs/log_main_20250630_200344.txt
2025-06-30 20:03:44,194 - INFO - 🚀 开始Wayback Machine分析流程...
2025-06-30 20:03:44,194 - INFO - 📊 公司: hsn.com
2025-06-30 20:03:44,204 - INFO - ✅ 成功读取 17 个历史URLs from ./inputs/hsn.com.txt
2025-06-30 20:03:44,204 - INFO - 🌐 开始URL处理...
2025-06-30 20:03:44,204 - INFO - 🌐 开始处理公司URLs: hsn.com
2025-06-30 20:03:44,204 - INFO - 🔍 处理 2009 年的URLs...
2025-06-30 20:03:44,205 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20091027081849/http://www.hsn.com/
2025-06-30 20:03:49,819 - INFO - ✅ 发现 44 个内部链接
2025-06-30 20:03:49,819 - INFO - ✅ URL过滤完成: 44/44 链接通过结构过滤
2025-06-30 20:03:49,819 - INFO - ✅ 2009 年处理完成: 44 个有效链接
2025-06-30 20:03:49,819 - INFO - 🔍 处理 2010 年的URLs...
2025-06-30 20:03:49,819 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20101228072012/https://www.hsn.com/
2025-06-30 20:03:52,871 - INFO - ✅ 发现 81 个内部链接
2025-06-30 20:03:52,872 - INFO - ✅ URL过滤完成: 81/81 链接通过结构过滤
2025-06-30 20:03:52,872 - INFO - ✅ 2010 年处理完成: 81 个有效链接
2025-06-30 20:03:52,872 - INFO - 🔍 处理 2011 年的URLs...
2025-06-30 20:03:52,872 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20111228070149/http://www.hsn.com/
2025-06-30 20:03:56,007 - INFO - ✅ 发现 74 个内部链接
2025-06-30 20:03:56,008 - INFO - ✅ URL过滤完成: 74/74 链接通过结构过滤
2025-06-30 20:03:56,008 - INFO - ✅ 2011 年处理完成: 74 个有效链接
2025-06-30 20:03:56,008 - INFO - 🔍 处理 2012 年的URLs...
2025-06-30 20:03:56,008 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20121226154840/http://www.hsn.com/
2025-06-30 20:03:59,854 - INFO - ✅ 发现 501 个内部链接
2025-06-30 20:03:59,856 - INFO - ✅ URL过滤完成: 501/501 链接通过结构过滤
2025-06-30 20:03:59,857 - INFO - ✅ 2012 年处理完成: 501 个有效链接
2025-06-30 20:03:59,857 - INFO - 🔍 处理 2013 年的URLs...
2025-06-30 20:03:59,857 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20131231220820/http://www.hsn.com/
2025-06-30 20:04:03,652 - INFO - ✅ 发现 102 个内部链接
2025-06-30 20:04:03,653 - INFO - ✅ URL过滤完成: 102/102 链接通过结构过滤
2025-06-30 20:04:03,653 - INFO - ✅ 2013 年处理完成: 102 个有效链接
2025-06-30 20:04:03,653 - INFO - 🔍 处理 2014 年的URLs...
2025-06-30 20:04:03,654 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20141231165124/http://www.hsn.com/
2025-06-30 20:04:06,034 - INFO - ✅ 发现 84 个内部链接
2025-06-30 20:04:06,035 - INFO - ✅ URL过滤完成: 84/84 链接通过结构过滤
2025-06-30 20:04:06,035 - INFO - ✅ 2014 年处理完成: 84 个有效链接
2025-06-30 20:04:06,035 - INFO - 🔍 处理 2015 年的URLs...
2025-06-30 20:04:06,035 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20151231084306/http://www.hsn.com/
2025-06-30 20:04:09,020 - INFO - ✅ 发现 71 个内部链接
2025-06-30 20:04:09,020 - INFO - ✅ URL过滤完成: 71/71 链接通过结构过滤
2025-06-30 20:04:09,021 - INFO - ✅ 2015 年处理完成: 71 个有效链接
2025-06-30 20:04:09,021 - INFO - 🔍 处理 2016 年的URLs...
2025-06-30 20:04:09,021 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20161231010524/http://www.hsn.com/
2025-06-30 20:04:12,900 - INFO - ✅ 发现 660 个内部链接
2025-06-30 20:04:12,902 - INFO - ✅ URL过滤完成: 660/660 链接通过结构过滤
2025-06-30 20:04:12,902 - INFO - ✅ 2016 年处理完成: 660 个有效链接
2025-06-30 20:04:12,902 - INFO - 🔍 处理 2017 年的URLs...
2025-06-30 20:04:12,902 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20171231193547/https://www.hsn.com/
2025-06-30 20:04:16,538 - INFO - ✅ 发现 598 个内部链接
2025-06-30 20:04:16,540 - INFO - ✅ URL过滤完成: 598/598 链接通过结构过滤
2025-06-30 20:04:16,540 - INFO - ✅ 2017 年处理完成: 598 个有效链接
2025-06-30 20:04:16,540 - INFO - 🔍 处理 2018 年的URLs...
2025-06-30 20:04:16,540 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20181231115126/https://www.hsn.com/
2025-06-30 20:04:19,662 - INFO - ✅ 发现 460 个内部链接
2025-06-30 20:04:19,664 - INFO - ✅ URL过滤完成: 460/460 链接通过结构过滤
2025-06-30 20:04:19,664 - INFO - ✅ 2018 年处理完成: 460 个有效链接
2025-06-30 20:04:19,664 - INFO - 🔍 处理 2019 年的URLs...
2025-06-30 20:04:19,664 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20191231193714/https://www.hsn.com/
2025-06-30 20:04:23,517 - INFO - ✅ 发现 498 个内部链接
2025-06-30 20:04:23,518 - INFO - ✅ URL过滤完成: 498/498 链接通过结构过滤
2025-06-30 20:04:23,519 - INFO - ✅ 2019 年处理完成: 498 个有效链接
2025-06-30 20:04:23,519 - INFO - 🔍 处理 2020 年的URLs...
2025-06-30 20:04:23,519 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20201231045050/https://www.hsn.com/
2025-06-30 20:04:27,079 - INFO - ✅ 发现 526 个内部链接
2025-06-30 20:04:27,081 - INFO - ✅ URL过滤完成: 526/526 链接通过结构过滤
2025-06-30 20:04:27,081 - INFO - ✅ 2020 年处理完成: 526 个有效链接
2025-06-30 20:04:27,081 - INFO - 🔍 处理 2021 年的URLs...
2025-06-30 20:04:27,081 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20211231062850/https://www.hsn.com/
2025-06-30 20:04:31,879 - INFO - ✅ 发现 569 个内部链接
2025-06-30 20:04:31,882 - INFO - ✅ URL过滤完成: 569/569 链接通过结构过滤
2025-06-30 20:04:31,882 - INFO - ✅ 2021 年处理完成: 569 个有效链接
2025-06-30 20:04:31,882 - INFO - 🔍 处理 2022 年的URLs...
2025-06-30 20:04:31,882 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20221231071041/https://www.hsn.com/
2025-06-30 20:04:35,105 - INFO - ✅ 发现 573 个内部链接
2025-06-30 20:04:35,107 - INFO - ✅ URL过滤完成: 573/573 链接通过结构过滤
2025-06-30 20:04:35,108 - INFO - ✅ 2022 年处理完成: 573 个有效链接
2025-06-30 20:04:35,108 - INFO - 🔍 处理 2023 年的URLs...
2025-06-30 20:04:35,108 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20231231225026/https://www.hsn.com/
2025-06-30 20:04:38,349 - INFO - ✅ 发现 597 个内部链接
2025-06-30 20:04:38,352 - INFO - ✅ URL过滤完成: 597/597 链接通过结构过滤
2025-06-30 20:04:38,352 - INFO - ✅ 2023 年处理完成: 597 个有效链接
2025-06-30 20:04:38,352 - INFO - 🔍 处理 2024 年的URLs...
2025-06-30 20:04:38,352 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20241231233439/https://www.hsn.com/
2025-06-30 20:04:41,649 - INFO - ✅ 发现 522 个内部链接
2025-06-30 20:04:41,651 - INFO - ✅ URL过滤完成: 522/522 链接通过结构过滤
2025-06-30 20:04:41,651 - INFO - ✅ 2024 年处理完成: 522 个有效链接
2025-06-30 20:04:41,651 - INFO - 🔍 处理 2025 年的URLs...
2025-06-30 20:04:41,651 - INFO - 🔍 开始发现URL: https://web.archive.org/web/20250508173808/https://www.hsn.com/
2025-06-30 20:04:45,470 - INFO - ✅ 发现 523 个内部链接
2025-06-30 20:04:45,472 - INFO - ✅ URL过滤完成: 523/523 链接通过结构过滤
2025-06-30 20:04:45,472 - INFO - ✅ 2025 年处理完成: 523 个有效链接
2025-06-30 20:04:45,479 - INFO - 💾 链接处理完成，共 6483 个链接已保存到: outputs/hsn.com/hsn.com_filtered_links.json
2025-06-30 20:04:45,481 - INFO - ✅ 成功加载 17 年的链接数据
2025-06-30 20:04:45,481 - INFO - ✅ URL处理完成，共处理 17 年的数据
2025-06-30 20:04:45,481 - INFO - 🧠 开始LLM规划...
2025-06-30 20:04:45,636 - INFO - 🚀 LLM规划器已初始化
2025-06-30 20:04:45,636 - INFO - 🧠 开始识别核心页面类型...
2025-06-30 20:04:45,641 - INFO - 🤖 调用LLM模型 [识别核心页面类型]: google/gemini-2.5-pro
2025-06-30 20:04:48,106 - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 402 Payment Required"
2025-06-30 20:04:48,107 - ERROR - ❌ LLM API调用失败: Error code: 402 - {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 30000 tokens, but can only afford 1097. To increase, visit https://openrouter.ai/settings/credits and add more credits', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tz6KvroFpahm7nown93X1G1k8L'}
2025-06-30 20:04:48,107 - ERROR - ❌ 流程执行失败: Error code: 402 - {'error': {'message': 'This request requires more credits, or fewer max_tokens. You requested up to 30000 tokens, but can only afford 1097. To increase, visit https://openrouter.ai/settings/credits and add more credits', 'code': 402, 'metadata': {'provider_name': None}}, 'user_id': 'user_2tz6KvroFpahm7nown93X1G1k8L'}
